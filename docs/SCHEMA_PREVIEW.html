<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CareerLink Database Schema</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=JetBrains+Mono&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        :root {
            --bg: #ffffff;
            --text: #1a1a1a;
            --accent: #2563eb;
            --border: #e5e7eb;
            --code-bg: #f3f4f6;
            --header-bg: #f8fafc;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--text);
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            background: var(--bg);
        }

        #content {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            border: 1px solid var(--border);
            overflow-wrap: break-word;
            /* Ensure long words don't break layout */
        }

        h1,
        h2,
        h3 {
            color: var(--text);
            margin-top: 2em;
            border-bottom: 2px solid var(--border);
            padding-bottom: 0.3em;
        }

        h1 {
            font-size: 2.5em;
            border-bottom: 4px solid var(--accent);
        }

        /* Mobile Responsive Table Wrapper */
        .table-responsive {
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
            min-width: 600px;
            /* Prevent shrinking too much */
        }

        th {
            background: var(--header-bg);
            text-align: left;
            padding: 12px;
            border-bottom: 2px solid var(--border);
            font-weight: 700;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid var(--border);
        }

        code {
            font-family: 'JetBrains Mono', monospace;
            background: var(--code-bg);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .no-print {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--accent);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
            transition: all 0.2s;
            cursor: pointer;
            border: none;
            z-index: 1000;
        }

        .no-print:hover {
            transform: translateY(-2px);
            opacity: 0.9;
        }

        /* Responsive Adjustments */
        @media screen and (max-width: 600px) {
            body {
                padding: 10px;
            }

            #content {
                padding: 20px;
                border-radius: 0;
                box-shadow: none;
                border-left: none;
                border-right: none;
            }

            h1 {
                font-size: 1.8em;
            }

            h2 {
                font-size: 1.4em;
            }

            .no-print {
                position: relative;
                top: 0;
                right: 0;
                display: block;
                width: 100%;
                text-align: center;
                margin-bottom: 20px;
            }
        }

        @media print {
            .no-print {
                display: none;
            }

            body {
                padding: 0;
            }

            #content {
                box-shadow: none;
                border: none;
                padding: 0;
            }
        }
    </style>
</head>

<body>
    <button class="no-print" onclick="window.print()">Print to PDF</button>
    <div id="content"></div>

    <script>
        const markdown = `
# CareerLink Database Schema

This document defines the PostgreSQL database structure for the CareerLink Nexus project.

## 1. Roles Table
| Column | Type | Constraints | Description |
| :--- | :--- | :--- | :--- |
| id | UUID | PRIMARY KEY | |
| role | VARCHAR(50) | NOT NULL | 'job_seeker' or 'employeer' |
| created_at | TIMESTAMP | DEFAULT NOW() | |
| updated_at | TIMESTAMP | DEFAULT NOW() | |

## 2. Job Seeker Users Table
| Column | Type | Constraints | Description |
| :--- | :--- | :--- | :--- |
| id | UUID | PRIMARY KEY | |
| email | VARCHAR(255) | UNIQUE, NOT NULL | |
| password_hash| TEXT | NOT NULL | |
| first_name | VARCHAR(100) | NOT NULL | |
| last_name | VARCHAR(100) | NOT NULL | |
| role_id | UUID | FOREIGN KEY (roles.id) | |
| created_at | TIMESTAMP | DEFAULT NOW() | |

## 3. Employeer Users Table
| Column | Type | Constraints | Description |
| :--- | :--- | :--- | :--- |
| id | UUID | PRIMARY KEY | |
| email | VARCHAR(255) | UNIQUE, NOT NULL | Official Company Email |
| organization_name | VARCHAR(255) | NOT NULL | |
| company_website | VARCHAR(255) | NOT NULL | |
| is_verified | BOOLEAN | DEFAULT FALSE | |
| role_id | UUID | FOREIGN KEY (roles.id) | |

---

## ðŸ—ï¸ The "Hybrid CV" System

### PATH A: Profile Builder (Structured CV)

### 4. Profiles Table (Base)
| Column | Type | Constraints | Description |
| :--- | :--- | :--- | :--- |
| id | UUID | PRIMARY KEY | |
| user_id | UUID | FOREIGN KEY (job_seeker_user.id) | |
| headline | VARCHAR(255) | | |
| bio | TEXT | | |
| phone | VARCHAR(20) | | |
| location | VARCHAR(100) | | |

### 5. Experience Table
| Column | Type | Constraints | Description |
| :--- | :--- | :--- | :--- |
| id | SERIAL | PRIMARY KEY | |
| profile_id | UUID | FOREIGN KEY (profiles.id) | |
| company_name | VARCHAR(100) | | |
| job_title | VARCHAR(100) | | |

### 6. Education Table
| Column | Type | Constraints | Description |
| :--- | :--- | :--- | :--- |
| id | SERIAL | PRIMARY KEY | |
| profile_id | UUID | FOREIGN KEY (profiles.id) | |
| institution | VARCHAR(255) | | |
| degree | VARCHAR(100) | | |

### 7. Skills Table
| Column | Type | Constraints | Description |
| :--- | :--- | :--- | :--- |
| id | SERIAL | PRIMARY KEY | |
| profile_id | UUID | FOREIGN KEY (profiles.id) | |
| skill_name | VARCHAR(100) | | |
| skill_type | VARCHAR(20) | | |

### 8. Projects Table
| Column | Type | Constraints | Description |
| :--- | :--- | :--- | :--- |
| id | SERIAL | PRIMARY KEY | |
| profile_id | UUID | FOREIGN KEY (profiles.id) | |
| project_title | VARCHAR(255) | | |
| description | TEXT | | |

### 9. Trainings Table
| Column | Type | Constraints | Description |
| :--- | :--- | :--- | :--- |
| id | SERIAL | PRIMARY KEY | |
| profile_id | UUID | FOREIGN KEY (profiles.id) | |
| title | VARCHAR(255) | | |
| provider | VARCHAR(255) | | |

### 10. Social & Portfolio Links Table (NEW)
Stores external professional presence (LinkedIn, GitHub, Behance, etc.).

| Column | Type | Constraints | Description |
| :--- | :--- | :--- | :--- |
| id | SERIAL | PRIMARY KEY | |
| profile_id | UUID | FOREIGN KEY (profiles.id) | |
| platform_name | VARCHAR(50) | | e.g. 'LinkedIn', 'GitHub' |
| link_url | TEXT | NOT NULL | |
| created_at | TIMESTAMP | DEFAULT NOW() | |

---

### PATH B: Ready-Made CV (Uploaded PDF)

### 11. Resumes Table
| Column | Type | Constraints | Description |
| :--- | :--- | :--- | :--- |
| id | SERIAL | PRIMARY KEY | |
| profile_id | UUID | FOREIGN KEY (profiles.id) | |
| resume_url | TEXT | NOT NULL | |
| is_default | BOOLEAN | DEFAULT TRUE | |

---

## ðŸ“¢ Job Management & Applications

### 12. Job Listings Table
Stores detailed job vacancies posted by employers.

| Column | Type | Constraints | Description |
| :--- | :--- | :--- | :--- |
| id | UUID | PRIMARY KEY | |
| company_id | UUID | FOREIGN KEY (employeer_user.id) ON DELETE CASCADE | |
| title | VARCHAR(255) | NOT NULL | e.g. "Chartered Accountant" |
| location | VARCHAR(100) | | e.g. "Tahachal" |
| job_type | VARCHAR(50) | | e.g. "Full Time" |
| career_level | VARCHAR(50) | | e.g. "Senior Level" |
| vacancy_count | INT | DEFAULT 1 | |
| experience_req | VARCHAR(100) | | e.g. "2-5 Years" |
| salary | VARCHAR(100) | | e.g. "Negotiable" |
| gender_pref | VARCHAR(20) | | Both, Male, Female |
| driving_license| BOOLEAN | DEFAULT FALSE | |
| education_pref | TEXT | | |
| skills_required| TEXT | | Comma-separated or JSON array |
| job_description| TEXT | NOT NULL | Core duties |
| requirements | TEXT | | Knowledge, Skills, and Abilities |
| competencies | TEXT | | Preferred competencies |
| benefits | TEXT | | Company perks |
| apply_instr | TEXT | | Special instructions for applying |
| contact_email | VARCHAR(255) | | |
| contact_phone | VARCHAR(255) | | |
| contact_whatsapp| VARCHAR(255) | | |
| views | INT | DEFAULT 0 | Tracking popularity |
| deadline | DATE | | |
| status | VARCHAR(20) | DEFAULT 'open' | 'open', 'closed' |
| created_at | TIMESTAMP | DEFAULT NOW() | |
| updated_at | TIMESTAMP | DEFAULT NOW() | |

### 13. Job Applications Table
| Column | Type | Constraints | Description |
| :--- | :--- | :--- | :--- |
| id | SERIAL | PRIMARY KEY | |
| job_id | UUID | FOREIGN KEY (job_listings.id) | |
| job_seeker_id | UUID | FOREIGN KEY (job_seeker_user.id) | |
| application_method| VARCHAR(20) | | 'platform_cv', 'pdf_resume', or 'both' |
| resume_id | INT | FOREIGN KEY (resumes.id) | |
| status | VARCHAR(50) | DEFAULT 'applied' | applied, reviewed, shortlisted, interview_scheduled, rejected |

---

## ðŸ›ï¸ Unified Views

### 14. job_seeker_full_profile_view (The CV Dynamic Builder)
This is a Virtual Table (SQL VIEW) that aggregates all seeker data for the "Profile Preview" and "Employer Review" screens. It avoids the need for multiple backend queries.

| Column | Source Table | Description |
| :--- | :--- | :--- |
| profile_data | Profiles | Core info (Bio, Headline, Location, Picture) |
| user_info | Job Seeker Users | Identity (Name, Email) |
| experiences | Experience | JSON Array of all work history |
| education | Education | JSON Array of all academic history |
| skills | Skills | JSON Array of technical/core skills |
| projects | Projects | JSON Array of portfolio projects |
| training | Trainings | JSON Array of certifications |
| social_links | Social Links | JSON Array of professional links (LinkedIn/GitHub) |

*Note: This view allows the platform to fetch a 100% complete CV in milliseconds.*
        `;
        const contentDiv = document.getElementById('content');
        contentDiv.innerHTML = marked.parse(markdown);

        // Responsive table wrapper logic
        document.querySelectorAll('table').forEach(table => {
            const wrapper = document.createElement('div');
            wrapper.className = 'table-responsive';
            table.parentNode.insertBefore(wrapper, table);
            wrapper.appendChild(table);
        });
    </script>
</body>

</html>